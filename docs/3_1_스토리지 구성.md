오퍼레이터, 관리자, 클러스터 관리자가 공유할 **공유 스토리지**

**Azure Cloud Shell**에서 사용하도록 **Azure Storage Account**와 **파일 공유(Azure Files)** 로 구성  


---

## **구성 목표**
1. **Azure Storage Account** 생성  
2. **Azure Files (SMB/NFS 공유 폴더) 생성**  
3. **Azure AD 기반의 RBAC 권한 할당** (오퍼레이터, 관리자, 클러스터 관리자)  
4. **Azure Cloud Shell에서 공유 스토리지 마운트**  

---

## **1. Azure Storage Account 생성**
```sh
STORAGE_ACCOUNT_NAME=akscloudshellstorage
RESOURCE_GROUP=rg-aks-cloudshell
LOCATION=koreacentral


1. **리소스 그룹 생성**
    ```bash
    az group create --name $RESOURCE_GROUP --location $LOCATION
    ```

2. **Storage Account 생성**
    ```bash
    az storage account create \
    --name $STORAGE_ACCOUNT_NAME \
    --resource-group $RESOURCE_GROUP \
    --location $LOCATION \
    --sku Standard_LRS \
    --kind StorageV2

    # az storage account update \
    # --name $STORAGE_ACCOUNT_NAME \
    # --resource-group $RESOURCE_GROUP \
    # --enable-files-aadds true

```
- `Standard_LRS`: 기본적인 지역 복제 저장소 사용  
- `StorageV2`: 최신 스토리지 종류  

---

## **2. Azure Files 공유 폴더 생성**
```sh
FILE_SHARE_NAME=aks-shared-scripts
az storage share-rm create \
  --storage-account $STORAGE_ACCOUNT_NAME \
  --name $FILE_SHARE_NAME \
  --quota 100
```
- `--quota 100`: 100GB 크기의 공유 폴더 생성  

---

